# This file is a template, and might need editing before it works on your project.
---
# Build JAVA applications using Apache Maven (http://maven.apache.org)
# For docker image tags see https://hub.docker.com/_/maven/
#
# For general lifecycle information see https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html
# 
# This template will build and test your projects as well as create the documentation.
# 
# * Caches downloaded dependencies and plugins between invocation.
# * Does only verify merge requests but deploy built artifacts of the
#   master branch.
# * Shows how to use multiple jobs in test stage for verifying functionality
#   with multiple JDKs.
# * Uses site:stage to collect the documentation for multi-module projects.
# * Publishes the documentation for `master` branch.

language: 
  java

variables:
  # This will supress any download for dependencies and plugins or upload messages which would clutter the console log.
  # `showDateTime` will show the passed time in milliseconds. You need to specify `--batch-mode` to make this work.
  MAVEN_OPTS: "-Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=WARN -Dorg.slf4j.simpleLogger.showDateTime=true -Djava.awt.headless=true"
  # As of Maven 3.3.0 instead of this you may define these options in `.mvn/maven.config` so the same config is used
  # when running from the command line.
  # `installAtEnd` and `deployAtEnd`are only effective with recent version of the corresponding plugins.
  MAVEN_CLI_OPTS: "--batch-mode --errors --fail-at-end --show-version -DinstallAtEnd=true -DdeployAtEnd=true -f demeter-parent/pom.xml"

script: 
  mvn clean package -f demeter-parent/pom.xml

jdk:
  oraclejdk7

#deploy:
#  provider: releases
#  api_key: "969e6b065c656d24e55c9661337254c03a427332"
#  file: 
#  skip_cleanup: true
#  on:
#    tags: true
    
#branches:
#  except:
#    - travis
    
after_success:
  - "[[ ${TRAVIS_PULL_REQUEST} == 'false' ]] && mvn deploy -DskipTests --settings etc/deploy-settings.xml"
      
#env:
#  global:
#    # Encrypted (by Travis) the user name.
#    - secure: "pUpSjJSZQzZFeCUFX04DkqEdke5N6M+5PKSuiMSwePj/NcwPy7RTn4kcg3kJO+345nwFWide/bCqGYjHoy1cgIPfUeqrhgzg8vXCRgvTuTnD0voaAfI+yg8MkTabrHJAEQ3+UhwoIPL9XgcJDRG/HBTRwcCwSTwZhH2yg9Vn5cOHUeRvA7R8mZKsyDth5ZV98XqW2OSxbTx/HYZhS+HVocq+R/EFxjzEUTMmb6nok8fH0eqjn9MiP08hNqL6gDOwGa19eNCRmTNDl6Fqd1KpzThylcU9T0qRbhh2fs7kBEGyej5CUFsjWd0oNpSQ2kFj3hx7fP9G5+htFQeSMr1D5ItgNQ9OIkQYGn8Lf+Ymr89sirUQYfWiKt9HCI/IQXG3rUOjyYsFu51//5zl4jo+OUXfXD1XRask4EZchx9aZl43HzQ744xtvi1jQSUOI0UddC65r9BxHm9QbzxJSoWWY3UBSG867rOnBmj9FNJQbPZJdB/LbyeJCHTjhYiIzwAPJFI13YB2M3Pqa0QohgrIDz0ge9lWb5YUuDbEmQVC9bPfh0JTrx3hTly+kvNvHfJx3TjJjtRUsa8XbiHBeeO6WjaUzCCHJG7IiVQbcSF8tzmffvRIpDe+xvcriDDL2pc1ioO+Om0boEDYWaM5fQJIE8jrcJjRjhYkR4WB3VZDCgo="
#    # Encrypted (by Travis) the password.
#    - secure: "K64aJFGxW0uNr9z1pnr4O97FUhawz12GJMzXS5f7VFFip2uMjrva0kSnUqCf0R/Dcuy0czCYGHQgOlX0p6YPQLgV02oifDvEP73WMIVNxMxMnRa8IVjzqr12JsVyeG5zasqy7ILex/BfzS6ANK4jtsz1+/H+PVLH4/shnreLo2gkEUrRGGWQ5AP6B1LCfgewg8K8pAxyDx9YJtZhf859fJrnHAD11wVBlLe4P8PBSjjv4RYhedkssBgfoWVQsfmOCBLqAOGUmxDg6qCupqT00NXOQ78GVpudbn3QPWadgQ5h49EvLA1iP4vtm85uuiH1+raNComGyqQ9+669XDoh5HJS6YFqb7iN1FJ2exuOg8bnOdKDzDEXSwAprDY+dC+/VSBtqMegkSlTHLebTWsn0WgGca8TimFqmrG8IjDybVQP56awPBb3IpHq9dDUlyxw50WEhGmxESBLrobZazDMO6Hy+KxC+xbn6eRZ0LR2DIK5+jgcxj6bQS+LtMrdakc829y6hy6AiX3NaCvsnKYVucdN4pdFQF+cTQnxgwQBNT3zEQmcRzmWw0QuRnqIxJKbTNy83e8mDVsKtVXIQJb3+HJSwvXwFJaq/C85ryhln7d+npHlDBaDfU7SbyGowr7cZ+n+JUNHz0v1gG2p105BVhrbe3F2TX8kziCAWXfj6f0="
    
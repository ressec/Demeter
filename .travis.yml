sudo: false
language: java
script: mvn clean package -f demeter-parent/pom.xml
jdk: oraclejdk7
after_success:
- echo "<settings><servers><server><id>nexus-snapshots</id><username>\${env.CI_DEPLOY_USERNAME}</username><password>\${env.CI_DEPLOY_PASSWORD}</password></server></servers></settings>"
  > ~/settings.xml
- if [ -z ${TRAVIS_TAG} ]; then mvn deploy -f demeter-parent/pom.xml -DskipTests --settings
  ~/settings.xml; fi
before_deploy:
- mvn package
- zip -r ${TRAVIS_TAG}.zip target/*.jar
deploy:
  provider: releases
  api_key:
    secure: mGDUY/kmWaBsq/vfjf1Q2+2zbmxBzZuFCfZfYA5aoX+z2WNR50e0yqlfy/2bHneIND3dvq0c16Xbq4UDIY7VGUNKnUb3NdbLM0nTWG2FUkXywg6eiY0xlmtkegS8RlSydXZ+caXLe5CGpswq9rnI3EmTnYh0GpFDIFZVIik2dDFdp3d7FN4yaEsonwdsS9xq4ss8uXEO1uuOq32tZjcwLU4ogqul2x+aX2Pqdg/CmdhF3RJAx79bVRfhVS0wDVbI9vb3qCJZy/b/F/DcHz+Sxkz1gpuqwlrwXPf83vysWkj8+bHLkM9Gba4QRkp/h583UBuComvfkp7ErFL8wIrriJZ4NP7cxRvdu3D2uHyi6LIzyzJXiJl0QbazGZLNho2bj0gBxtJ7oCOSTTWGv1leR4TpQBLsl55gJgU3Y8GLHMadV9r6t5b9UlKv6Dbp0AplmCTbgFOlPq5h0holRYTNNRkIyxaI11tQAmAfohfhsFD0oYo9KVkHe2yicHyw4xxrXBRF/34RvkRWJkcu+8ZqY93sFjNpkpfnnjRTwz3n8ypKL5AKZmho4m2BYSO8Es4rjr5hzXlXVA9xeZYVXnWwsDuqOIwyrH47I6B9BhOqJkOES68hMz09VuM+GYd+HmKZ6UER3r2teIRMd+Aga8OCKdswoWyWMxzKJSvNbwKI1uw=
  file: "${TRAVIS_TAG}.zip"
  on:
    repo: ressec/demeter
    tags: true
    all_branches: true
notifications:
  slack:
    secure: NAo+R/TsqVQVxofrNQiJ1WcyKfBhifjVzCHQy7/5u/+5Vu2ycIluqK76rMGgsd7hB6Bfeo2KUpQsCfd2cOlNOIRMqoHcAmfiBYvaau8VaoXVF9JTprXcEM1N9lXx6zDeHvTzGvTOVN54MZaEWeJNSnYHZktKuZaUbvk+c1b7vmiX6OXvfu/jOBA1+KkfoCmxnC5GObUgNmx9YZowhNr75EPLN+vXK7//6YRZ42kEzjUlkr8Q2wmg528wbRIdltBg+bG47QRHONFhH2iRIuKewO8rwEk2vAyvm1ArLvxLipJrIN7GMwcoGTzTFk6pUoX7ifgz5WAh1LFyz30ehprrVpVKslwF1HknzVUvSIp+RDSbEbiJyxp4P8CiZ0N6Bfo3g/lfy7HutEKlhB7QqonDTneHinfN371FwbbI/VzXkmzB55BHXsqH+be3GNiBOihU88EhS2M5l93uzLclhJwXbiuQO+VM07qaNt+9RFLg/mm+LH3a7AmB+vvTqMI7CEFDDGv2NcOXyDUl0XnnxQl/8XziSr0sx/JCDsxQTwCD03rVjKRUAOfoYTijM7H0sJAYRE5HW+iwPzhHwjSIXZPSFEeHFWYenwUInd7iFEQng7a2l/eRELhMBuWA0qBSNnbcGFQttt2bq/51NYZMKUu41An1gN56i/sHk7Od49KHjT4=
